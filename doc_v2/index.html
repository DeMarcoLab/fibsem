
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>OpenFIBSEM Documentation - FIBSEM Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.9f615399.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#openfibsem-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FIBSEM Docs" class="md-header__button md-logo" aria-label="FIBSEM Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FIBSEM Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenFIBSEM Documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FIBSEM Docs" class="md-nav__button md-logo" aria-label="FIBSEM Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    FIBSEM Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenFIBSEM
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../automation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../ml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine Learning
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Roadmap
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-microscope" class="md-nav__link">
    Setting up Microscope
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="openfibsem-documentation">OpenFIBSEM Documentation</h1>
<h2 id="overview">Overview</h2>
<p>OpenFIBSEM is a platform built with python to allow high level FIB-SEM microscope control using a single package across multiple supported microscopes. Currently, support for microscopes of Thermo Fisher Scientific and TESCAN are actively being developed. </p>
<p>The OpenFIBSEM package allows control of the microscope in the same syntactic manner regardless of the brand of microscope in use as the package is built upon the existing SDKs for both the different microscopes. </p>
<p>The microscope client is set up using an internet connection. Hence the microscope control PC I.P. address needs to be set to connect. (“localhost” if on a PC connected directly to a microscope).</p>
<p>The microscope organisation is abstracted away in the FibsemMicroscope class. All hardware implementations follow the same abstract organisation. This allows for a black box approach in the external modules, where all calls to the microscope are independent of the specific hardware, and all direct calls to the APIs are limited to the class methods. </p>
<p><img alt="Figure 1: Implemented methods in microscope class" src="/docs/openFibsemv2.png" /></p>
<p>As an example, to take a set of reference images from the microscope using an electron beam and an ion beam, the syntax is as follows:</p>
<pre><code>eb_image, ib_image = acquire.take_reference_images(microscope, image_settings)
</code></pre>
<p>In this case, the type of microscope is not relevant for the user and this method will work. However, the type of microscope must be initialised during setup. If the microscope in use is a supported Thermo Fisher or TESCAN microscope, it must be set up as so in the system.yaml file.</p>
<p>Along with taking images, specific imaging parameters can also be specified. This can be done by creating and initialising an image settings object.</p>
<h2 id="setting-up-microscope">Setting up Microscope</h2>
<p>To set up a session with a microscope, relevant microscope type and connection parameters need to be set up in the system.yaml config file that is located in the following directory in the package:</p>
<pre><code>…/FIBSEM/fibsem/config/system.yaml
</code></pre>
<p>In the yaml file, the connection set up parameters required are
- I.P. Address
   - Address of the microscope to be used. The text “localhost” is valid if the microscope to connect to is on the local pc
- Manufacturer
    - Microscope manufacturer, If the microscope brand is supported by its relevant SDK packages.</p>
<pre><code class="language-yaml"># system
system:
  ip_address: &quot;localhost&quot; 
  application_file: autolamella
  manufacturer: &quot;Thermo&quot;
  # beams
  ion:
    voltage: 30000
    current: 20.e-12
    plasma_gas: &quot;Argon&quot; # proper case, e.g. Argon, Oxygen
    eucentric_height: 16.5e-3
    detector_type: ETD
    detector_mode: SecondaryElectrons
  electron:
    voltage: 2000
    current: 1.0e-12
    eucentric_height: 3.91e-3
    detector_type: ETD
    detector_mode: SecondaryElectrons
  # stage
  stage:
    rotation_flat_to_electron: 49 # degrees
    rotation_flat_to_ion: 229 # degrees
    tilt_flat_to_electron: 35 # degrees (pre-tilt)
    tilt_flat_to_ion: 52 # degrees
    pre_tilt: 35
    needle_stage_height_limit: 3.7e-3
# user config settings
user:
  imaging_current: 20.e-12
  milling_current: 2.e-9
  resolution: &quot;1536x1024&quot;
  hfw: 150.e-6  
  pixel_size: 
    x: 0.0
    y: 0.0
  beam_type: &quot;Electron&quot;
  autocontrast: True
  dwell_time: 1.e-6
  save: False
  gamma: # gamma correction parameters
    enabled: True
    min_gamma: 0.15
    max_gamma: 1.8
    scale_factor: 0.01
    threshold: 46 # px
</code></pre>
<p>User parameters can also be preset using the system.yaml file. All numerical values are in SI units: 
- Current: Amps (A)
- Time: Seconds (s)
- Distance: Metres (m)</p>
<h1 id="setting-hardware-parameters">Setting Hardware Parameters</h1>
<p>The hardware specifications need to be provided in the model.yaml file, found at:</p>
<pre><code>  …/FIBSEM/fibsem/config/model.yaml
</code></pre>
<pre><code class="language-yaml"># this file is used to define the microscope model, and enabled components
system:
  name: &quot;FIBSEM&quot;
  manufacturer: &quot;Demo&quot;
  description: &quot;FIBSEM&quot;
  version: &quot;0.1&quot;
  id: 00000
# define the microscope model
electron:
  enabled: True
ion:
  enabled: True
stage:
  enabled: True
  rotation: True
  tilt: True
manipulator:
  enabled: True
  rotation: True
  tilt: True
gis:
  enabled: True
  multichem: True
</code></pre>
<p>Simply set the parameter to True if the hardware is present in the microscope. </p>
<h2 id="example-code">Example code</h2>
<p>An example function for taking images with both beams can be found in the example_OpenFIBSEM file. </p>
<pre><code class="language-python">from fibsem import utils, acquire
import matplotlib.pyplot as plt


def main():
    # connect to microscope
    microscope, settings = utils.setup_session()

    # take image with both beams
    eb_image, ib_image = acquire.take_reference_images(microscope, settings.image)

    # show images
    fig, ax = plt.subplots(1, 2, figsize=(7, 5))
    ax[0].imshow(eb_image.data, cmap=&quot;gray&quot;)
    ax[1].imshow(ib_image.data, cmap=&quot;gray&quot;)
    plt.show()

if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<p><img alt="Figure 2: Example output " src="/docs/Figure_1.png" /></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>